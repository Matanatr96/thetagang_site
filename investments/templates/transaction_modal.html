<!-- Modal for adding transaction -->
<div id="addTransactionModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Add New Transaction</h2>
        <form id="transactionForm">
            <div class="form-group">
                <label for="securityType">Security Type:</label>
                <select id="securityType" name="securityType" required>
                    <option value="share">Share</option>
                    <option value="option">Option</option>
                    <option value="cash">Cash</option>
                </select>
            </div>
            <div class="form-group">
                <label for="existingOrNew">Existing or New:</label>
                <select id="existingOrNew" name="existingOrNew" required>
                    <option value="existing">Existing</option>
                    <option value="new">New</option>
                </select>
            </div>
            <div id="existingSecuritySection" class="form-group">
                <label for="existingSecurity">Select Existing Security:</label>
                <select id="existingSecurity" name="existingSecurity">
                    <!-- This will be populated dynamically -->
                </select>
            </div>
            <div id="newSecuritySection" style="display:none;">
                <div class="form-group">
                    <label for="ticker">Ticker:</label>
                    <input type="text" id="ticker" name="ticker">
                </div>
                <div id="optionFields" style="display:none;">
                    <div class="form-group">
                        <label for="expiration_date">Expiration Date:</label>
                        <input type="date" id="expiration_date" name="expiration_date">
                    </div>
                    <div class="form-group">
                        <label for="strike_price">Strike Price:</label>
                        <input type="number" id="strike_price" name="strike_price" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="direction">Direction:</label>
                        <select id="direction" name="direction">
                            <option value="c">Call</option>
                            <option value="p">Put</option>
                        </select>
                    </div>
                </div>
                <div id="cashFields", style="display:none;">
                    <div class="form-group">
                        <label for="description">Description:</label>
                        <select id="description" name="description">
                            <option value="d">Deposit</option>
                            <option value="i">Interest</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" required>
            </div>
            <div class="form-group">
                <label for="price">Price:</label>
                <input type="number" id="price" name="price" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="date">Transaction Date:</label>
                <input type="date" id="date" name="date" required>
            </div>
            <button type="submit" class="btn btn-primary">Add Transaction</button>
        </form>
    </div>
</div>

<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.4);
    }
    .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 500px;
    }
    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .form-group label {
        display: block;
        margin-bottom: 5px;
    }
    .form-group input,
    .form-group select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
</style>